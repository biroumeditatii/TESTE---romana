<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <title>Panou Monitorizare Profesor</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background: #0f172a; color: white; padding: 20px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
        .student-card { background: #1e293b; padding: 20px; border-radius: 15px; border-left: 5px solid #4f46e5; }
        .progress-bg { background: #334155; height: 12px; border-radius: 6px; margin-top: 10px; }
        .progress-fill { height: 100%; background: #10b981; border-radius: 6px; transition: width 0.5s; width: 0%; }
        .stats { display: flex; justify-content: space-between; margin-top: 5px; font-size: 0.8rem; color: #94a3b8; }
    </style>
</head>
<body>
    <h1>Monitorizare Clasă - Real Time</h1>
    <div id="status">Se așteaptă conectarea elevilor...</div>
    <div class="grid" id="students-grid"></div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyC2xOfKBy7FdA6uIyM0ij5ryHTop0yL3pg",
        authDomain: "bacromana-6f3eb.firebaseapp.com",
        databaseURL: "https://bacromana-6f3eb-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "bacromana-6f3eb",
        storageBucket: "bacromana-6f3eb.firebasestorage.app",
        messagingSenderId: "1087294677634",
        appId: "1:1087294677634:web:d92bf75a8b58f7b351ca9b"
    };

    firebase.initializeApp(firebaseConfig);
    const dbRef = firebase.database().ref('clasa/');

    dbRef.on('value', (snapshot) => {
        const data = snapshot.val();
        const grid = document.getElementById('students-grid');
        const status = document.getElementById('status');
        grid.innerHTML = '';
        
        if(!data) return;
        status.innerText = "Elevi activi: " + Object.keys(data).length;

        for (let id in data) {
            const student = data[id];
            grid.innerHTML += `
                <div class="student-card">
                    <div style="font-weight:bold">${student.nume}</div>
                    <div class="progress-bg">
                        <div class="progress-fill" style="width: ${student.progres}%"></div>
                    </div>
                    <div class="stats">
                        <span>Progres: ${student.progres}%</span>
                        <span>Scor: ${student.scor}</span>
                    </div>
                </div>
            `;
        }
    });
</script>
</body>
</html>